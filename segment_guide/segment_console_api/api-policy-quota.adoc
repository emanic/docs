== policy/quota

=== QuotaCheck

Allows you to verify the quota for a given identity in a given namespace
with the given tags.

==== Example

[source,json]
----
{
  "targetIdentity": "processingunit",
  "targetNamespace": "/my/namespace"
}
----

==== Relations

===== `POST /quotacheck`

Verifies if the quota is exceeded for a particular object.

Parameters:

* `remaining` (`boolean`): Makes the system count how many object are
left available in the quota.

==== Attributes

===== `quota` [`autogenerated`,`read_only`]

Type: `integer`

Contains the maximum number of matching entities that can be created.

===== `remaining` [`autogenerated`,`read_only`]

Type: `integer`

If the parameter `remaining=true` is passed, this value will be
populated with the number of remaining objects in the quota.

Default value:

[source,json]
----
-1
----

===== `targetIdentity` [`required`]

Type: `string`

The identity name of the object you want to check the quota on.

===== `targetNamespace`

Type: `string`

The namespace from which you want to check the quota on.

=== QuotaPolicy

Allows you to set quotas on the number of objects that can be created in
a namespace.

==== Example

[source,json]
----
{
  "disabled": false,
  "fallback": false,
  "identities": [
    "processingunit",
    "enforcer"
  ],
  "name": "the name",
  "propagate": false,
  "propagationHidden": false,
  "protected": false,
  "targetNamespace": "/my/namespace"
}
----

==== Relations

===== `GET /quotapolicies`

Retrieves the list of quotas.

Parameters:

* `q` (`string`): Filtering query. Consequent `q` parameters will form
an or.
* `propagated` (`boolean`): Also retrieve the objects that propagate
down.

===== `POST /quotapolicies`

Creates a new quota.

===== `DELETE /quotapolicies/:id`

Deletes the quota with the given ID.

Parameters:

* `q` (`string`): Filtering query. Consequent `q` parameters will form
an or.

===== `GET /quotapolicies/:id`

Retrieves the quota with the given ID.

===== `PUT /quotapolicies/:id`

Updates the quota with the given ID.

==== Attributes

===== `ID` [`identifier`,`autogenerated`,`read_only`]

Type: `string`

Identifier of the object.

===== `annotations`

Type: `map[string][]string`

Stores additional information about an entity.

===== `associatedTags`

Type: `[]string`

List of tags attached to an entity.

===== `createTime` [`autogenerated`,`read_only`]

Type: `time`

Creation date of the object.

===== `description` [`max_length=1024`]

Type: `string`

Description of the object.

===== `disabled`

Type: `boolean`

Defines if the property is disabled.

===== `expirationTime`

Type: `time`

If set the quota will be automatically deleted after the given time.

===== `fallback`

Type: `boolean`

Indicates that this is fallback policy. It will only be applied if no
other policies have been resolved. If the policy is also propagated it
will become a fallback for children namespaces.

===== `identities` [`required`]

Type: `[]string`

Contains the list of identity names where the quota will be applied.

===== `metadata` [`creation_only`]

Type: `[]string`

Contains tags that can only be set during creation, must all start with
the `@' prefix, and should only be used by external systems.

===== `name` [`required`,`max_length=256`]

Type: `string`

Name of the entity.

===== `namespace` [`autogenerated`,`read_only`]

Type: `string`

Namespace tag attached to an entity.

===== `normalizedTags` [`autogenerated`,`read_only`]

Type: `[]string`

Contains the list of normalized tags of the entities.

===== `propagate`

Type: `boolean`

Propagates the policy to all of its children.

===== `propagationHidden`

Type: `boolean`

If set to `true` while the policy is propagating, it wonâ€™t be visible to
children namespace, but still used for policy resolution.

===== `protected`

Type: `boolean`

Defines if the object is protected.

===== `quota`

Type: `integer`

Specifies the maximum number of objects matching the policy subject that
can be created.

===== `targetNamespace` [`required`]

Type: `string`

Contains the base namespace from where the count will be done.

===== `updateTime` [`autogenerated`,`read_only`]

Type: `time`

Last update date of the object.
