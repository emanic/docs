## policy/files

### FileAccessPolicy

A file access policy allows processing units to access various folder and files.
It will use the tags of a file path to know what is the path of the file or
folder to allow access to. You can allow the processing unit to have any
combination of read, write, or execute.

When a processing unit is a Docker container, then it will police the volumes.
Mount and execute won't have any effect.

File paths are not supported yet for standard Linux processes.

#### Example

```json
{
  "allowsExecute": false,
  "allowsRead": false,
  "allowsWrite": false,
  "disabled": false,
  "encryptionEnabled": false,
  "fallback": false,
  "logsEnabled": false,
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /fileaccesspolicies`

Retrieves the list of file access policies.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /fileaccesspolicies`

Creates a new file access policies.

##### `DELETE /fileaccesspolicies/:id`

Deletes the policy with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /fileaccesspolicies/:id`

Retrieves the policy with the given ID.

##### `PUT /fileaccesspolicies/:id`

Updates the policy with the given ID.

##### `GET /fileaccesspolicies/:id/filepaths`

Returns the list of file paths that match the policy.

##### `GET /fileaccesspolicies/:id/processingunits`

Returns the list of processing units that match the policy.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

Identifier of the object.

##### `activeDuration` `string` [`format=^[0-9]+[smh]$`]

Defines for how long the policy will be active according to the
`activeSchedule`.

##### `activeSchedule` `string`

Defines when the policy should be active using the cron notation.
The policy will be active for the given `activeDuration`.

##### `allowsExecute` `boolean`

Allows files to be executed.

##### `allowsRead` `boolean`

Allows files to be read.

##### `allowsWrite` `boolean`

Allows files to be written.

##### `annotations` `map[string][]string`

Stores additional information about an entity.

##### `associatedTags` `[]string`

List of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description of the object.

##### `disabled` `boolean`

Defines if the property is disabled.

##### `encryptionEnabled` `boolean`

Set to `true` to enable automatic encryption.

##### `expirationTime` `time`

If set the policy will be automatically deleted after the given time.

##### `fallback` `boolean`

Indicates that this is fallback policy. It will only be
applied if no other policies have been resolved. If the policy is also
propagated it will become a fallback for children namespaces.

##### `logsEnabled` `boolean`

A value of `true` enables logging.

##### `metadata` `[]string` [`creation_only`]

Contains tags that can only be set during creation, must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

Contains the list of normalized tags of the entities.

##### `object` `[][]string`

The object of the policy.

##### `propagate` `boolean`

Propagates the policy to all of its children.

##### `protected` `boolean`

Defines if the object is protected.

##### `subject` `[][]string`

The subject of the policy.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

### FileAccessReport

Post a new file access report.

#### Example

```json
{
  "action": "Accepted",
  "host": "localhost",
  "mode": "rxw",
  "path": "/etc/passwd",
  "processingUnitID": "xxx-xxx-xxx-xxx",
  "processingUnitNamespace": "/my/ns",
  "timestamp": "2018-06-14T23:10:46.420397985Z"
}
```

#### Relations

##### `POST /fileaccessreports`

Create a file access statistics report.

#### Attributes

##### `action` `enum(Accept | Reject | Limit)` [`required`]

Action taken.

##### `host` `string` [`required`]

Host storing the file.

Default value:

```json
"localhost"
```

##### `mode` `string` [`required`]

Mode of file access.

Default value:

```json
"rxw"
```

##### `path` `string` [`required`]

Path of the file.

Default value:

```json
"/etc/passwd"
```

##### `processingUnitID` `string` [`required`]

ID of the processing unit.

##### `processingUnitNamespace` `string` [`required`]

Namespace of the processing unit.

##### `timestamp` `time` [`required`]

Date of the report.

### FilePath

A file path represents a random path to a file or a folder. They can be used in
file access policies to allow processing units to access them, using
various modes (read, write, execute). You will need to use the file paths tags
to set some policies. A good example would be `volume=web` or
`file=/etc/passwd`.

#### Example

```json
{
  "filepath": "/etc/passwd",
  "name": "the name",
  "propagate": false,
  "protected": false
}
```

#### Relations

##### `GET /filepaths`

Retrieves the list of file paths.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.
- `archived` (`boolean`): Also retrieve the objects that have been archived.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `POST /filepaths`

Create a new file path.

##### `DELETE /filepaths/:id`

Deletes the object with the given ID.

Parameters:

- `q` (`string`): Filtering query. Consequent `q` parameters will form an or.

##### `GET /filepaths/:id`

Retrieves the object with the given ID.

Parameters:

- `archived` (`boolean`): Also retrieve the objects that have been archived.
- `propagated` (`boolean`): Also retrieve the objects that propagate down.

##### `PUT /filepaths/:id`

Updates the object with the given ID.

##### `GET /fileaccesspolicies/:id/filepaths`

Returns the list of file paths that match the policy.

#### Attributes

##### `ID` `string` [`identifier`,`autogenerated`,`read_only`]

Identifier of the object.

##### `annotations` `map[string][]string`

Stores additional information about an entity.

##### `associatedTags` `[]string`

List of tags attached to an entity.

##### `createTime` `time` [`autogenerated`,`read_only`]

Creation date of the object.

##### `description` `string` [`max_length=1024`]

Description of the object.

##### `filepath` `string` [`required`]

FilePath refer to the file mount path.

##### `metadata` `[]string` [`creation_only`]

Contains tags that can only be set during creation, must all start
with the '@' prefix, and should only be used by external systems.

##### `name` `string` [`required`,`max_length=256`]

Name of the entity.

##### `namespace` `string` [`autogenerated`,`read_only`]

Namespace tag attached to an entity.

##### `normalizedTags` `[]string` [`autogenerated`,`read_only`]

Contains the list of normalized tags of the entities.

##### `propagate` `boolean`

Propagates the policy to all of its children.

##### `protected` `boolean`

Defines if the object is protected.

##### `server` `string` [`creation_only`]

server is the server name/ID/IP associated with the file path.

##### `updateTime` `time` [`autogenerated`,`read_only`]

Last update date of the object.

